<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detección de manos</title>
  <!-- Ajusta la ruta según la ubicación de handtrack.min.js en tu proyecto -->
  <script src="/static/handtrack.min.js"></script>
</head>
<body>
  <video id="myVideo" width="640" height="480" autoplay></video>
  <script>
    // Inicializar la cámara
    navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;
    
    navigator.getUserMedia({ video: {} }, (stream) => {
      let video = document.getElementById('myVideo');
      video.srcObject = stream;

      // Inicializar Handtrack.js
      const modelParams = {
        flipHorizontal: false,
        maxNumBoxes: 1,
        iouThreshold: 0.1,
        scoreThreshold: 0.6,
      };

      handTrack.load(modelParams).then(model => {
        // Iniciar la detección en bucle
        setInterval(() => {
          model.detect(video).then(predictions => {
            if (predictions && predictions.length > 0) {
              // Muestra las coordenadas de todas las manos detectadas
              console.log(predictions.map(prediction => prediction.bbox));
            }
          });
        }, 1000); // Ajusta la frecuencia de detección según sea necesario
      });
    }, (err) => console.error(err));
  </script>
</body>
</html>
